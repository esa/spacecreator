all:	simulate

simulate:
	# Configure gprbuild to use GCC toolchain even if LLVM is installed
	gprconfig --batch --config=Ada,,default,,GNAT --config=C,,default,,GCC --config=C++,,default,,G++ || :
	ADA_PROJECT_PATH=~/.local/share/gpr:${ADA_PROJECT_PATH} gprbuild -p -P simulator.gpr -XCFG="Debug" -cargs:C -DSTATIC=""
	ADA_PROJECT_PATH=~/.local/share/gpr:${ADA_PROJECT_PATH} gprinstall -f --install-name=simulator -p --prefix=../../simulation/ simulator.gpr

clean:
	rm -rf demo_obj

