-- Timer Manager autogenerated code (from TASTE/Kazoo) : DO NOT EDIT
system demo_timer_manager;

   /* CIF TEXT (0, 0), (100, 100) */
   use dataview comment 'dataview-uniq.asn';
   signal tick;
   signal rtdlcr_FrameTimer;

   exported procedure set_rtdlcr_FrameTimer;
      fpar in val T_UInt32;
   referenced;

   exported procedure reset_rtdlcr_FrameTimer;
   referenced;
   /* CIF ENDTEXT */

   channel c
      from env to demo_timer_manager with tick;
      from demo_timer_manager to env with
      rtdlcr_FrameTimer;

   endchannel;

   block demo_timer_manager;
      signalroute r
         from env to demo_timer_manager with tick;
         from demo_timer_manager to env with
            rtdlcr_FrameTimer;


      connect c and r;

      process demo_timer_manager;
         /* CIF TEXT (0, 0), (100, 100) */
         synonym running T_UInt32 = 1;
         synonym stopped T_UInt32 = 0;

         dcl rtdlcr_FrameTimer_state, rtdlcr_FrameTimer_value T_UInt32 := 0;
         procedure set_rtdlcr_FrameTimer;
            fpar in val T_UInt32;
         start;
            task rtdlcr_FrameTimer_state := running, rtdlcr_FrameTimer_value := val / 10;
            return;
         endprocedure;
         procedure reset_rtdlcr_FrameTimer;
         start;
            task rtdlcr_FrameTimer_state := stopped, rtdlcr_FrameTimer_value := 0;
            return;
         endprocedure;
         /* CIF ENDTEXT */

         start;
         nextstate wait;
         state wait;
            input tick;
               decision rtdlcr_FrameTimer_state;
                  (running):
                     task rtdlcr_FrameTimer_value := rtdlcr_FrameTimer_value - 1;
                     decision rtdlcr_FrameTimer_value;
                        (0):
                           task rtdlcr_FrameTimer_state := stopped;
                           output rtdlcr_FrameTimer;
                        else:
                     enddecision;
                  else:
               enddecision;
               nextstate wait;
         endstate;
      endprocess demo_timer_manager;
   endblock;
endsystem;
