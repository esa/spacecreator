--  TASTE Concurrency View - Generated by Kazoo, do not edit manually
--  Generated by the template: ~/tool-src/kazoo/templates/concurrency_view/aadl_2_threads/system.tmplt

package Function_1_Pi_2_Thread
public
   with Deployment;
   with Process_Package;
   with Dataview;

thread Function_1_Pi_2
features
   INPORT_Pi_2 : in event data port DataView::MyChoice_Buffer.impl
      { Compute_Execution_Time =>  0 ms ..  0 ms;
        Queue_Size =>  1;
        Compute_Entrypoint_Source_Text => "Demo_TASTE_Interface.Function_1_Pi_2_PI_2"; };
   OUTPORT_Function_2_Pi_1 : out event data port DataView::MySeqOf_Buffer.impl;
end Function_1_Pi_2;

thread implementation Function_1_Pi_2.others
properties
   Activate_Entrypoint_Source_Text => "Demo_TASTE_Interface.Function_1_Pi_2_Init";
   Dispatch_Protocol                 => Sporadic;
   Period                            => 1 ms;
   Dispatch_Offset                   =>  0 ms;
   Compute_Execution_Time            =>  0 ms ..  0 ms;
   Stack_Size                        => 0 Bytes;
   Priority                          =>  1;
end Function_1_Pi_2.others;

end Function_1_Pi_2_Thread;
package Function_1_Poll_Thread
public
   with Deployment;
   with Process_Package;
   with Dataview;

thread Function_1_Poll
features
   OUTPORT_Function_2_Pi_1 : out event data port DataView::MySeqOf_Buffer.impl;
end Function_1_Poll;

thread implementation Function_1_Poll.others
properties
   Activate_Entrypoint_Source_Text => "Demo_TASTE_Interface.Function_1_Poll_Init";
   Compute_Entrypoint_Source_Text    => "Demo_TASTE_Interface.Function_1_Poll_Poll";
   Dispatch_Protocol                 => Periodic;
   Period                            => 10 ms;
   Dispatch_Offset                   =>  0 ms;
   Compute_Execution_Time            =>  0 ms ..  0 ms;
   Stack_Size                        => 0 Bytes;
   Priority                          =>  1;
end Function_1_Poll.others;

end Function_1_Poll_Thread;
package Function_2_Pi_1_Thread
public
   with Deployment;
   with Process_Package;
   with Dataview;

thread Function_2_Pi_1
features
   INPORT_Pi_1 : in event data port DataView::MySeqOf_Buffer.impl
      { Compute_Execution_Time =>  0 ms ..  0 ms;
        Queue_Size =>  1;
        Compute_Entrypoint_Source_Text => "Demo_TASTE_Interface.Function_2_Pi_1_PI_1"; };
   OUTPORT_Function_1_Pi_2 : out event data port DataView::MyChoice_Buffer.impl;
end Function_2_Pi_1;

thread implementation Function_2_Pi_1.others
properties
   Activate_Entrypoint_Source_Text => "Demo_TASTE_Interface.Function_2_Pi_1_Init";
   Dispatch_Protocol                 => Sporadic;
   Period                            => 1 ms;
   Dispatch_Offset                   =>  0 ms;
   Compute_Execution_Time            =>  0 ms ..  0 ms;
   Stack_Size                        => 0 Bytes;
   Priority                          =>  1;
end Function_2_Pi_1.others;

end Function_2_Pi_1_Thread;

package Process_Package
public
   with arinc653;
   with Deployment;
   with DataView;
   with interfaceview::IV;
   with deploymentview::DV;
   with deploymentview::DV::node_linux;
   with Function_1_Pi_2_Thread;
   with Function_1_Poll_Thread;
   with Function_2_Pi_1_Thread;
   with Ocarina_Processors_X86;


--  Required by AIR to allow inter-partition communications
subprogram do_ports_polling
properties
   Source_Language => C;
   Source_Name     => "user_ports_polling";
   Source_Text     => ("air_polling.c");
end do_ports_polling;
thread Port_Poller
end    Port_Poller;

thread implementation Port_Poller.i
calls
   Mycalls: {
      P_Spg : subprogram do_ports_polling;
   };
properties
   Dispatch_Protocol => Periodic;
   Period            => 100 ms;
   Deadline          => 100 ms;
end Port_Poller.i;


processor node_linux_Board extends ocarina_processors_x86::x86
end node_linux_Board;

processor implementation node_linux_Board.final extends ocarina_processors_x86::x86.linux
end node_linux_Board.final;


process Demo extends DeploymentView::DV::Node_Linux::Demo
end demo;

process implementation Demo.final
subcomponents
   
   function_1_PI_2 : thread function_1_PI_2_Thread::function_1_PI_2.others;
   function_1_Poll : thread function_1_Poll_Thread::function_1_Poll.others;
   function_2_PI_1 : thread function_2_PI_1_Thread::function_2_PI_1.others;
connections
   port Function_1_Pi_2.OUTPORT_Function_2_Pi_1 -> Function_2_Pi_1.INPORT_Pi_1;
   port Function_1_Poll.OUTPORT_Function_2_Pi_1 -> Function_2_Pi_1.INPORT_Pi_1;
   port Function_2_Pi_1.OUTPORT_Function_1_Pi_2 -> Function_1_Pi_2.INPORT_Pi_2;
end Demo.final;

system DeploymentView
end DeploymentView;

system implementation DeploymentView.final
subcomponents
   Demo : process Demo.final;
   Node_Linux_x86_linux : processor Node_Linux_Board.final;
properties
   Actual_Processor_Binding => (reference (Node_Linux_x86_linux)) applies to Demo;
--  patchable area (do not remove this line):
end DeploymentView.final;

end Process_Package;

-- deploymenttview.final
