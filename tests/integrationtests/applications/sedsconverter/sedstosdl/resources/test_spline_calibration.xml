<?xml version="1.0" encoding="utf-8"?>
<PackageFile xmlns="http://www.ccsds.org/schema/sois/seds" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.ccsds.org/schema/sois/seds seds.xsd">
  <Package name="SplineCalibration">
    <DataTypeSet>
      <IntegerDataType name="IntegerType">
        <IntegerDataEncoding encoding="unsigned" sizeInBits="8" />
        <Range>
          <MinMaxRange rangeType="inclusiveMinInclusiveMax" min="0" max="255" />
        </Range>
      </IntegerDataType>
      <FloatDataType name="RealType">
        <FloatDataEncoding encodingAndPrecision="IEEE754_2008_double" sizeInBits="64" />
        <Range>
          <PrecisionRange>double</PrecisionRange>
        </Range>
      </FloatDataType>
    </DataTypeSet>
    <DeclaredInterfaceSet>
      <Interface name="CalibrationInterface">
        <CommandSet>
          <Command name="Tick" mode="async" />
        </CommandSet>
      </Interface>
    </DeclaredInterfaceSet>
    <ComponentSet>
      <Component name="Calibration">
        <ProvidedInterfaceSet>
          <Interface name="ComponentInterface" type="CalibrationInterface" />
        </ProvidedInterfaceSet>
        <Implementation>
          <VariableSet>
            <Variable name="rawValue" type="RealType" />
            <Variable name="calibratedValue" type="RealType" />
          </VariableSet>
          <ActivitySet>
            <Activity name="CalibrateActivity">
              <Body>
                <Assignment outputVariableRef="rawValue">
                  <Value value="1.0"/>
                </Assignment>
                <Calibration inputVariableRef="rawValue" outputVariableRef="calibratedValue">
                    <SplineCalibrator>
                    <SplinePoint raw="1" calibrated="20" />
                    <SplinePoint raw="5" calibrated="200" />
                    <SplinePoint raw="20" calibrated="4000" />
                    </SplineCalibrator>
                </Calibration>
              </Body>
            </Activity>
          </ActivitySet>
          <StateMachineSet>
            <StateMachine name="CalibrationMachine">
              <EntryState name="Idle"/>
              <State name="DoCalibration"/>
              <Transition fromState="Idle" toState="DoCalibration" name="Calibrate">
                <OnCommandPrimitive interface="ComponentInterface" command="Tick" />
                <Do activity="CalibrateActivity" />
              </Transition>
            </StateMachine>
          </StateMachineSet>
        </Implementation>
      </Component>
    </ComponentSet>
  </Package>
</PackageFile>
