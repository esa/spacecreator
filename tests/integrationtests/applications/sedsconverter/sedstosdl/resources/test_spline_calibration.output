process Calibration;
    dcl Rawvalue RealType;
    dcl Calibratedvalue RealType;
    dcl RawSplinePoints1 SplinePointsArray;
    dcl CalibratedSplinePoints1 SplinePointsArray;

    procedure FindInterval;
        fpar
            in value SplinePointValue,
            in/out intervalStart SplinePointValue,
            in/out intervalEnd SplinePointValue;
        START;
        return ;
    endprocedure;

    procedure LinearCalibration;
        dcl intervalStart SplinePointValue;
        dcl intervalEnd SplinePointValue;
        dcl result SplinePointValue;
        fpar
            in value SplinePointValue;
        returns SplinePointValue;
        START;
            call FindInterval(value, intervalStart, intervalEnd);
            task result := value;
        return result;
    endprocedure;

    procedure SquareCalibration;
        START;
        return ;
    endprocedure;

    procedure CubicCalibration;
        START;
        return ;
    endprocedure;

    procedure InitRawSplinePoints1;
        START;
            task RawSplinePoints1 := {1.000000, 5.000000, 20.000000};
        return ;
    endprocedure;

    procedure InitCalibratedSplinePoints1;
        START;
            task CalibratedSplinePoints1 := {20.000000, 200.000000, 4000.000000};
        return ;
    endprocedure;

    procedure CalibrateActivity;
        START;
            task Rawvalue := 1.0;
            task Calibratedvalue := call LinearCalibration(Rawvalue);
        return ;
    endprocedure;

    START;
        call InitRawSplinePoints1;
        call InitCalibratedSplinePoints1;
        NEXTSTATE Idle;

    state DoCalibration;
    endstate;

    state Idle;
        input ComponentInterface_Tick_Pi;
            call CalibrateActivity;
            NEXTSTATE DoCalibration;
    endstate;

endprocess Calibration;
